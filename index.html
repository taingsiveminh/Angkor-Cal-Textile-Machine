<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Angkor-Cal Textile Machine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Using Battambang font for Khmer text for better readability -->
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&display=swap" rel="stylesheet">
    <!-- ✅ Font Awesome (for Facebook icon) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .khmer-text { font-family: 'Battambang', sans-serif; }
        .product-card { transition: transform .3s ease, box-shadow .3s ease; cursor: pointer; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,.1); }
        .carousel-item { position:absolute; width:100%; height:100%; top:0; left:0; background-size:cover; background-position:center; opacity:0; transition:opacity 1.5s ease-in-out; z-index:-1; }
        .carousel-item.active { opacity:1; }
        #message-box { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:1000; padding:24px; background:#fff; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,.2); max-width:90vw; text-align:center; opacity:0; visibility:hidden; transition:opacity .3s ease, visibility .3s ease; }
        #message-box.show { opacity:1; visibility:visible; }
        /* simple image fallback */
        .img-fallback { background:linear-gradient(135deg,#f3f4f6,#e5e7eb); display:flex; align-items:center; justify-content:center; color:#6b7280; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Custom Message Box for Notifications -->
    <div id="message-box" class="hidden">
        <p id="message-text" class="text-gray-800 font-medium mb-4"></p>
        <button id="message-close" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300">Close</button>
    </div>

    <!-- Navbar -->
    <nav class="bg-white shadow-lg fixed w-full z-20 top-0">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Website Logo and Name -->
            <a href="#" data-section="home" class="flex items-center space-x-2">
                <img src="d13logo.jpg" alt="Angkor-Cal Logo" class="h-10 w-10 rounded-full"/>
                <span id="nav-title" class="text-xl md:text-2xl font-bold text-gray-800" data-lang-key="navTitle">Angkor-Cali</span>
            </a>

            <!-- Desktop Menu & Language Switcher -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" data-section="home" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navHome">Home</a>
                <a href="#" data-section="profile" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navProfile">Profile</a>
                <a href="#" data-section="products" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navProducts">Products</a>
                <a href="#" data-section="services" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navServices">Our Services</a>
                <!-- ✅ New Consumables nav item -->
                <a href="#" data-section="consumables" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navConsumables">Consumables</a>
                <a href="#" data-section="contact" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navContact">Contact Us</a>
                <button id="lang-toggle" class="bg-gray-100 text-gray-600 font-medium py-2 px-3 rounded-lg hover:bg-blue-100 hover:text-blue-600 transition duration-300 text-sm">KH/EN</button>
            </div>

            <!-- Mobile Menu Button -->
            <div class="flex items-center md:hidden space-x-4">
                <button id="lang-toggle-mobile" class="bg-gray-100 text-gray-600 font-medium py-1 px-2 rounded-lg hover:bg-blue-100 hover:text-blue-600 transition duration-300 text-sm">KH/EN</button>
                <button id="menu-toggle" class="text-gray-600 hover:text-blue-600 focus:outline-none" aria-label="Toggle Menu">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                </button>
            </div>
        </div>

        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white px-6 pb-4">
            <a href="#" data-section="home" class="nav-link block py-2 text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navHome">Home</a>
            <a href="#" data-section="profile" class="nav-link block py-2 text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navProfile">Profile</a>
            <a href="#" data-section="products" class="nav-link block py-2 text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navProducts">Products</a>
            <a href="#" data-section="services" class="nav-link block py-2 text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navServices">Our Services</a>
            <!-- ✅ New Consumables in mobile menu -->
            <a href="#" data-section="consumables" class="nav-link block py-2 text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navConsumables">Consumables</a>
            <a href="#" data-section="contact" class="nav-link block py-2 text-gray-600 hover:text-blue-600 transition duration-300" data-lang-key="navContact">Contact Us</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 pb-12">
        <!-- Home Section (Hero) -->
        <section id="home" data-section="home" class="section-content bg-blue-600 text-white py-24 md:py-32 overflow-hidden relative">
            <div id="image-carousel" class="absolute inset-0 z-0">
                <div class="carousel-item active" style="background-image:url('https://chiuvention.com/wp-content/uploads/2025/04/smart-textile-lab.webp');"></div>
                <div class="carousel-item" style="background-image:url('https://chiuvention.com/wp-content/uploads/2025/03/textile_testing_machine_agent.webp');"></div>
                <div class="carousel-item" style="background-image:url('https://chiuvention.com/wp-content/uploads/2025/07/%E8%92%99%E7%89%88%E7%BB%84-47@2x.jpg');"></div>
            </div>
            <div class="container mx-auto text-center px-6 relative z-10 bg-black/30 p-4 rounded-xl">
                <h1 id="hero-title" class="text-4xl md:text-6xl font-extrabold mb-4" data-lang-key="heroTitle">Innovative Textile Testing Solutions</h1>
                <p id="hero-subtitle" class="text-lg md:text-xl max-w-2xl mx-auto mb-8" data-lang-key="heroSubtitle">Providing high-quality and reliable machinery for the textile industry.</p>
                <a href="#" data-section="products" class="nav-link bg-white text-blue-600 font-semibold py-3 px-8 rounded-full shadow-lg hover:bg-gray-100 transition duration-300 transform hover:scale-105" data-lang-key="heroButton">Explore Products</a>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" data-section="profile" class="section-content hidden py-16 bg-gray-100">
            <div class="container mx-auto px-6">
                <h2 id="profile-heading" class="text-4xl font-bold text-center text-blue-800 mb-12" data-lang-key="profileTitle">Company Profile</h2>
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto text-center">
                    <p id="profile-content-1" class="text-lg text-gray-600 leading-relaxed" data-lang-key="profileContent1">Angkor-Cal Textile Machine is a leading provider of advanced textile testing equipment...</p>
                    <p id="profile-content-2" class="text-lg text-gray-600 leading-relaxed mt-4" data-lang-key="profileContent2">We embrace the <b>Digital Future of Textile Testing</b>...</p>
                </div>
            </div>
        </section>

        <!-- Products List Section -->
        <section id="products" data-section="products" class="section-content hidden py-16">
            <div class="container mx-auto px-6">
                <h2 id="products-heading" class="text-4xl font-bold text-center text-blue-800 mb-12" data-lang-key="productsTitle">Our Products</h2>
                <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8"></div>
            </div>
        </section>

        <!-- Dynamic Product Detail Section -->
        <section id="product-detail" data-section="product-detail" class="section-content hidden py-16">
            <div class="container mx-auto px-6">
                <a href="#" data-section="products" class="nav-link text-blue-600 hover:underline mb-4 inline-block">
                    <span id="detail-back-button" data-lang-key="detailBackButton">&larr; Back to Products</span>
                </a>
                <div id="detail-content" class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto"></div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" data-section="services" class="section-content hidden py-16 bg-gray-100">
            <div class="container mx-auto px-6">
                <h2 id="services-heading" class="text-4xl font-bold text-center text-blue-800 mb-12" data-lang-key="servicesTitle">Our Services</h2>
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto text-center">
                    <p id="services-content-1" class="text-lg text-gray-600 leading-relaxed" data-lang-key="servicesContent1">We offer comprehensive technical support...</p>
                    <p id="services-content-2" class="text-lg text-gray-600 leading-relaxed mt-4" data-lang-key="servicesContent2">From initial consultation to after-sales maintenance...</p>
                </div>
            </div>
        </section>

        <!-- ✅ NEW: Consumables Section -->
        <section id="consumables" data-section="consumables" class="section-content hidden py-16">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center text-blue-800 mb-3" data-lang-key="consumablesTitle">Lab Consumables</h2>
                <p class="text-center text-gray-600 mb-10" data-lang-key="consumablesIntro">Standardized fabrics, detergents, scales and accessories for textile testing.</p>
                <div id="consumables-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" data-section="contact" class="section-content hidden py-16">
            <div class="container mx-auto px-6">
                <h2 id="contact-heading" class="text-4xl font-bold text-center text-blue-800 mb-12" data-lang-key="contactTitle">Contact Us</h2>
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-lg mx-auto">
                    <p id="contact-info-1" class="text-lg text-gray-700 mb-4" data-lang-key="contactInfo1"><b>Address:</b> Phnom Penh, Cambodia (Office location will be provided upon request)</p>
                    <p id="contact-info-2" class="text-lg text-gray-700 mb-4" data-lang-key="contactInfo2"><b>Email:</b> info@angkorcal.com</p>
                    <p id="contact-info-3" class="text-lg text-gray-700 mb-6" data-lang-key="contactInfo3"><b>Phone:</b> (+855) 017 224 772</p>
                    <div class="flex justify-center space-x-6">
                        <a href="https://www.facebook.com/share/1CA7K4Resm/" target="_blank" class="text-blue-600 hover:text-blue-800 transition duration-300"><i class="fab fa-facebook-square text-4xl"></i></a>
                        <a href="mailto:info@angkorcal.com" class="text-red-600 hover:text-red-800 transition duration-300"><i class="fas fa-envelope-square text-4xl"></i></a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-6 text-center">
            <p id="footer-text" class="text-sm" data-lang-key="footerText">@copy; 2024 Angkor-Cal Textile Machine. All rights reserved.</p>
        </div>
    </footer>

<script>
let currentLang = 'en';

// --- PRODUCT CARDS (existing minimal to keep demo working) ---
const PRODUCTS = {
  infradye:{id:'infradye', image:'d17.jpg', detailImage:'d17.jpg'},
  'smartpull-dual':{id:'smartpull-dual', image:'d18.jpg', detailImage:'d18.jpg'},
  smartshrink:{id:'smartshrink', image:'d19.jpg', detailImage:'d19.jpg'},
  hydroburst:{id:'hydroburst', image:'d3.jpg', detailImage:'d3.jpg'},
  airficient:{id:'airficient', image:'d1.jpg', detailImage:'d1.jpg'},
  smartcrock:{id:'smartcrock', image:'d20.jpg', detailImage:'d20.jpg'},
  smartcut:{id:'smartcut', image:'d6.jpg', detailImage:'d6.jpg'},
  smartdispen:{id:'smartdispen', image:'d21.jpg', detailImage:'d21.jpg'},
  smartdry:{id:'smartdry', image:'d7.jpg', detailImage:'d7.jpg'},
  smartfill:{id:'smartfill', image:'d9.jpg', detailImage:'d9.jpg'},
  smartindale:{id:'smartindale', image:'d8.jpg', detailImage:'d8.jpg'},
  'smartpull-single':{id:'smartpull-single', image:'d10.jpg', detailImage:'d10.jpg'},
  atmoexplorer:{id:'atmoexplorer', image:'d2.jpg', detailImage:'d2.jpg'},
  innoflex:{id:'innoflex', image:'d4.jpg', detailImage:'d4.jpg'},
  propress:{id:'propress', image:'d5.jpg', detailImage:'d5.jpg'},
  washtrue:{id:'washtrue', image:'d22.jpg', detailImage:'d22.jpg'},
  elmenguide:{id:'elmenguide', image:'d12.jpg', detailImage:'d12.jpg'}
};

// --- ✅ CONSUMABLES DATA ---
const CONSUMABLES = [
  { id:'c1',  title:'AATCC Grey Scale (Color Change & Staining)',     image:'c1.jpg' },
  { id:'c2',  title:'SDC Cotton Lawn',                                 image:'c3.jpg' },
  { id:'c3',  title:'SDC Multifiber DW',                               image:'c2.jpg' },
  { id:'c4',  title:'SDC Phenolic Yellowing Control Fabric',           image:'c4.jpg' },
  { id:'c5',  title:'Woven Felt Pads',                                  image:'c5.jpg' },
  { id:'c6',  title:'SDCE Blue Wool',                                   image:'c6.jpg' },
  { id:'c7',  title:'SDCE ECE Non-Phosphate Detergent',                 image:'c7.jpg' },
  { id:'c8',  title:'TAED 92% (Tetraacetylethylenediamine)',           image:'c8.jpg' },
  { id:'c9',  title:'SDCE Cotton Ballast',                              image:'c9.jpg' },
  { id:'c10', title:'SDCE Grey Scales for Assessing Staining',          image:'c10.jpg' },
  { id:'c11', title:'SDCE Humidity Control Fabric',                     image:'c11.jpg' },
  { id:'c12', title:'Nylon F03 (Polyamide)',                            image:'c12.jpg' },
  { id:'c13', title:'ISO 105/A01 Standard Depths (Set)',                image:'c13.jpg' },
  { id:'c14', title:'SDC Polyetherurethane Foam',                       image:'c14.jpg' },
  { id:'c15', title:'Tide Detergent',                                   image:'c15.jpg' },
  { id:'c16', title:'AATCC Multifibre Test Fabric',                     image:'c16.jpg' }
];

// --- TRANSLATIONS ---
const TRANSLATIONS = {
  navTitle:{en:'Angkor-Cali', km:'អង្គរ-កាលី'},
  navHome:{en:'Home', km:'ទំព័រដើម'},
  navProfile:{en:'Profile', km:'ប្រវត្តិក្រុមហ៊ុន'},
  navProducts:{en:'Products', km:'ផលិតផល'},
  navServices:{en:'Our Services', km:'សេវាកម្មរបស់យើង'},
  navConsumables:{en:'Consumables', km:'សម្ភារៈប្រើប្រាស់'},
  navContact:{en:'Contact Us', km:'ទំនាក់ទំនង'},
  heroTitle:{en:'Innovative Textile Testing Solutions', km:'ដំណោះស្រាយសាកល្បងវាយនភ័ណ្ឌប្រកបដោយភាពច្នៃប្រឌិត'},
  heroSubtitle:{en:'Providing high-quality and reliable machinery for the textile industry.', km:'ផ្គត់ផ្គង់គ្រឿងម៉ាស៊ីនដែលមានគុណភាពខ្ពស់ និងអាចទុកចិត្តបានសម្រាប់ឧស្សាហកម្មវាយនភ័ណ្ឌ។'},
  heroButton:{en:'Explore Products', km:'ស្វែងយល់ពីផលិតផល'},
  profileTitle:{en:'Company Profile', km:'ប្រវត្តិក្រុមហ៊ុន'},
  productsTitle:{en:'Our Products', km:'ផលិតផលរបស់យើង'},
  servicesTitle:{en:'Our Services', km:'សេវាកម្មរបស់យើង'},
  contactTitle:{en:'Contact Us', km:'ទំនាក់ទំនងមកយើង'},
  detailBackButton:{en:'← Back to Products', km:'← ត្រឡប់ទៅផលិតផលវិញ'},
  footerText:{en:'@copy; 2024 Angkor-Cal Textile Machine. All rights reserved.', km:'© 2024 ម៉ាស៊ីនវាយនភ័ណ្ឌ អង្គរ-កាលី។ រក្សាសិទ្ធិគ្រប់យ៉ាង។'},
  servicesContent1:{en:'We offer comprehensive technical support, installation, calibration, and training services for all our textile testing machines. Our commitment is to ensure your equipment operates at peak performance.', km:'យើងផ្តល់ជូនការគាំទ្រផ្នែកបច្ចេកទេស ការដំឡើង ការក្រិត និងសេវាបណ្តុះបណ្តាលសម្រាប់ម៉ាស៊ីនសាកល្បងទាំងអស់របស់យើង។'},
  servicesContent2:{en:'From initial consultation to after-sales maintenance, our expert team provides swift, reliable service to minimize downtime and maximize lab efficiency.', km:'ចាប់ពីការពិគ្រោះដំបូងរហូតដល់ការថែទាំក្រោយលក់ ក្រុមអ្នកជំនាញផ្តល់សេវារហ័ស និងអាចទុកចិត្តបាន។'},
  contactInfo1:{en:'<b>Address:</b> Phnom Penh, Cambodia (Office location will be provided upon request)', km:'<b>អាសយដ្ឋាន៖</b> ភ្នំពេញ កម្ពុជា (នឹងផ្តល់ទីតាំងការិយាល័យតាមការស្នើសុំ)'},
  contactInfo2:{en:'<b>Email:</b> info@angkorcal.com', km:'<b>អ៊ីមែល៖</b> info@angkorcal.com'},
  contactInfo3:{en:'<b>Phone:</b> (+855) 17 224 772', km:'<b>ទូរស័ព្ទ៖</b> (+855) 17 224 772'},
  // ✅ Consumables strings
  consumablesTitle:{en:'Lab Consumables', km:'សម្ភារៈបរិក្ខារ​មន្ទីរពិសោធន៍'},
  consumablesIntro:{en:'Standardized fabrics, detergents, scales and accessories for textile testing.', km:'ក្រណាត់ស្តង់ដារ សាប៊ូ/ប៉ោដឺ និងគ្រឿងបន្លាស់សម្រាប់ការធ្វើតេស្តវាយនភ័ណ្ឌ។'}
};

function updateLanguage() {
  document.querySelectorAll('[data-lang-key]').forEach(el => {
    const key = el.getAttribute('data-lang-key');
    const tr = TRANSLATIONS[key];
    if(!tr) return;
    let content = tr[currentLang] || tr['en'];
    content = content.replace(/\*\*(.*?)\*\*/g,'<b>$1</b>');
    const allowHTML = ['profile-content-1','profile-content-2','contact-info-1','contact-info-2','contact-info-3'];
    if (allowHTML.includes(el.id)) { el.innerHTML = content; } else { el.textContent = content; }
  });
  // Rerender sections that depend on language (headings already update via data-lang-key)
  renderProductList();
  renderConsumables();
  document.body.classList.toggle('khmer-text', currentLang === 'km');
}

function renderProductList(){
  const wrap = document.getElementById('product-list');
  if (!wrap) return;
  let html = '';
  for (const key in PRODUCTS){
    const p = PRODUCTS[key];
    const titleKey = `${key}-title`;
    const shortKey = `${key}-short`;
    const title = (TRANSLATIONS[titleKey]?.[currentLang]) || key;
    const shortDesc = (TRANSLATIONS[shortKey]?.[currentLang]) || (currentLang==='km'?'លម្អិតសូមទាក់ទងយើង':'Contact us for details');
    html += `
      <div data-product-id="${key}" class="product-card bg-white rounded-xl shadow-lg p-6 border border-gray-200 hover:border-blue-500 hover:shadow-xl transition duration-300">
        <div class="w-full h-40 rounded-xl mb-4 overflow-hidden">
          <img src="${p.image}" alt="${title}" class="w-full h-full object-cover" onerror="this.replaceWith(fallbackImg())" />
        </div>
        <h3 class="text-xl font-semibold text-blue-700 mb-2">${title}</h3>
        <p class="text-gray-600 text-sm">${shortDesc}</p>
      </div>`;
  }
  wrap.innerHTML = html;
  document.querySelectorAll('#product-list .product-card').forEach(card=>{
    card.addEventListener('click', e=>{
      e.preventDefault();
      const id = card.getAttribute('data-product-id');
      showProductDetail(id);
    });
  });
}

function showProductDetail(productId){
  const p = PRODUCTS[productId];
  const box = document.getElementById('detail-content');
  const titleKey = `${productId}-title`;
  const longKey = `${productId}-long`;
  const featKey = `${productId}-features`;
  const title = (TRANSLATIONS[titleKey]?.[currentLang]) || productId;
  const longDesc = (TRANSLATIONS[longKey]?.[currentLang]) || (currentLang==='km'?'សូមទាក់ទងសម្រាប់ព័ត៌មានបន្ថែម។':'Please contact us for full specifications.');
  const features = (TRANSLATIONS[featKey]?.[currentLang]) || [];
  const feats = Array.isArray(features) ? features.map(f=>`<li>${f}</li>`).join('') : '';

  box.innerHTML = `
    <h2 class="text-4xl font-bold text-center text-blue-800 mb-8">${title}</h2>
    <div class="w-full rounded-xl mb-6 overflow-hidden shadow-md">
      <img src="${p.detailImage}" alt="${title}" class="w-full h-auto" onerror="this.replaceWith(fallbackImg(320,200))" />
    </div>
    <p class="text-lg text-gray-600 leading-relaxed mb-6">${longDesc.replace(/\*\*(.*?)\*\*/g,'<b>$1</b>')}</p>
    ${feats?`<div class="mt-8 border-t border-gray-200 pt-6">
      <h3 class="text-2xl font-semibold text-gray-700 mb-4">${currentLang==='en'?'Key Features':'លក្ខណៈពិសេសសំខាន់ៗ'}</h3>
      <ul class="list-disc list-inside space-y-2 text-gray-600">${feats}</ul>
    </div>`:''}`;
  showSection('product-detail');
}

// ✅ Render Consumables Grid
function renderConsumables(){
  const wrap = document.getElementById('consumables-list');
  if (!wrap) return;
  wrap.innerHTML = CONSUMABLES.map(item=>`
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
      <div class="w-full h-40">
        <img src="${item.image}" alt="${item.title}" class="w-full h-full object-cover" onerror="this.replaceWith(fallbackImg())"/>
      </div>
      <div class="p-4">
        <h3 class="font-semibold text-blue-700 text-base">${item.title}</h3>
      </div>
    </div>
  `).join('');
}

function showSection(sectionId){
  document.querySelectorAll('.section-content').forEach(sec=>{
    const isTarget = sec.getAttribute('data-section') === sectionId;
    sec.classList.toggle('hidden', !isTarget);
  });
  window.scrollTo({top:0, behavior:'smooth'});
  if (sectionId==='products') renderProductList();
  if (sectionId==='consumables') renderConsumables();
}

function showMessageBox(message){
  const box = document.getElementById('message-box');
  document.getElementById('message-text').textContent = message;
  box.classList.remove('hidden');
  void box.offsetWidth;
  box.classList.add('show');
}

// Simple placeholder image element
function fallbackImg(w=400,h=160){
  const div = document.createElement('div');
  div.className = 'img-fallback';
  div.style.width = '100%';
  div.style.height = h+'px';
  div.innerHTML = '<span>Image coming soon</span>';
  return div;
}

// --- INIT ---

document.addEventListener('DOMContentLoaded', () => {
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  menuToggle.addEventListener('click', ()=> mobileMenu.classList.toggle('hidden'));

  // Hero carousel
  let currentImage = 0; const carouselItems = document.querySelectorAll('.carousel-item');
  setInterval(()=>{ carouselItems[currentImage].classList.remove('active'); currentImage=(currentImage+1)%carouselItems.length; carouselItems[currentImage].classList.add('active'); },5000);

  // Nav link handling
  document.querySelectorAll('.nav-link').forEach(link=>{
    link.addEventListener('click', e=>{
      e.preventDefault();
      const sec = e.currentTarget.getAttribute('data-section');
      if (!sec) return;
      showSection(sec);
      mobileMenu.classList.add('hidden');
    });
  });

  // Language toggle
  const toggleLanguage = ()=>{ currentLang = currentLang==='en'?'km':'en'; updateLanguage(); };
  document.getElementById('lang-toggle').addEventListener('click', toggleLanguage);
  document.getElementById('lang-toggle-mobile').addEventListener('click', toggleLanguage);
  document.getElementById('message-close').addEventListener('click', ()=>{
    const box = document.getElementById('message-box'); box.classList.remove('show'); setTimeout(()=> box.classList.add('hidden'),300);
  });

  updateLanguage();
  showSection('home');
});
</script>
</body>
</html>

